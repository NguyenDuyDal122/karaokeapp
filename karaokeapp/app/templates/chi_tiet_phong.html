{% extends "base.html" %}
{% block title %}{{ room.TenPhong }} | Karaoke App{% endblock %}

{% block content %}

<div style="width:80%; margin:40px auto; display:flex; gap:40px; flex-wrap:wrap; align-items:flex-start;">

    <!-- ·∫¢NH PH√íNG -->
    <div style="flex: 1; min-width:350px;">
        <img src="{{ room.HinhAnh }}"
             alt="{{ room.TenPhong }}"
             style="width:100%; height:320px; object-fit:cover; border-radius:12px;
                    box-shadow:0 4px 12px rgba(0,0,0,0.15);">
    </div>

    <!-- TH√îNG TIN PH√íNG -->
    <div style="flex: 1; min-width:350px;">
        <h2 style="color:#007BFF; margin-bottom:20px; font-size:2rem; font-weight:700;">
            {{ room.TenPhong }}
        </h2>

        <table style="width:100%; line-height:1.8; font-size:1.05rem;">
            <tr>
                <td><strong>Lo·∫°i ph√≤ng</strong></td>
                <td>
                    {% if room.LoaiPhong == 'VIP' %}
                    <span style="font-weight:600; color:gold;">‚ú® VIP</span>
                    {% else %}
                    <span style="font-weight:600; color:#007BFF;">Ph√≤ng th∆∞·ªùng</span>
                    {% endif %}
                </td>
            </tr>

            <tr>
                <td><strong>S·ª©c ch·ª©a</strong></td>
                <td>{{ room.SucChua }} ng∆∞·ªùi</td>
            </tr>

            <tr>
                <td><strong>Gi√° theo gi·ªù</strong></td>
                <td style="color:#28a745; font-weight:600;">{{ "{:,.0f}".format(room.GiaGio) }} VND/h</td>
            </tr>

            <tr>
                <td><strong>Tr·∫°ng th√°i</strong></td>
                <td>
                    {% if room.trang_thai_dat == 'TRONG' %}
                    <span style="color:green; font-weight:600;">üü¢ Tr·ªëng</span>

                    {% elif room.trang_thai_dat == 'DANG_HAT' %}
                    <span style="color:red; font-weight:600;">üî¥ ƒêang h√°t</span>

                    {% elif room.trang_thai_dat == 'BAO_TRI' %}
                    <span style="color:orange; font-weight:600;">üõ†Ô∏è B·∫£o tr√¨</span>
                    {% endif %}
                </td>
            </tr>
        </table>

        <p style="margin-top:15px; font-size:1rem;">
            <strong>M√¥ t·∫£:</strong><br>
            {{ room.MoTa or "Ch∆∞a c√≥ m√¥ t·∫£ cho ph√≤ng n√†y." }}
        </p>

        <h3 style="margin-top:25px; color:#007BFF; font-weight:700;">üìÖ L·ªãch ƒë√£ ƒë·∫∑t</h3>

        {% if lich_dat and lich_dat|length > 0 %}
        <ul style="list-style:none; padding-left:0; margin-top:10px;">
            {% for dp in lich_dat %}
            <li style="background:#f8f9fa; padding:10px 15px; margin-bottom:8px;
                       border-radius:8px; border-left:4px solid #007BFF;">
                ‚è∞ <strong>{{ dp.ThoiGianBatDau.strftime("%d/%m/%Y %H:%M") }}
                ‚Üí {{ dp.ThoiGianKetThuc.strftime("%d/%m/%Y %H:%M") }}</strong>
                <span style="color:gray; font-size:0.9rem;">
                    ({{ dp.TrangThai }})
                </span>
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <p style="color:gray;">Ch∆∞a c√≥ l·ªãch ƒë·∫∑t n√†o cho ph√≤ng n√†y.</p>
        {% endif %}


        {% if room.trang_thai_dat != 'BAO_TRI' %}
        {% if session.get("role") == "khachhang" %}
        <!-- N·∫øu l√† kh√°ch h√†ng: ƒê·∫∑t ph√≤ng -->
        <a href="{{ url_for('dat_phong', ma_phong=room.MaPhong) }}"
           style="display:inline-block; margin-top:25px; background-color:#28a745; color:white;
                  padding:14px 25px; border-radius:10px; text-decoration:none; font-size:1.1rem; font-weight:600;">
            üè∑Ô∏è ƒê·∫∑t ph√≤ng ngay
        </a>

        {% elif session.get("role") == "nhanvien" %}
        <!-- N·∫øu l√† nh√¢n vi√™n: th√™m kh√°ch h√†ng -->
        <a href="{{ url_for('them_khach_hang', ma_phong=room.MaPhong) }}"
           style="display:inline-block; margin-top:25px; background-color:#007bff; color:white;
                  padding:14px 25px; border-radius:10px; text-decoration:none; font-size:1.1rem; font-weight:600;">
            üè∑Ô∏è ƒê·∫∑t ph√≤ng ngay
        </a>

        {% else %}
        <!-- N·∫øu ch∆∞a ƒëƒÉng nh·∫≠p -->
        <a href="{{ url_for('login') }}"
           style="display:inline-block; margin-top:25px; background-color:#ffc107; color:black;
                  padding:14px 25px; border-radius:10px; text-decoration:none; font-size:1.1rem; font-weight:600;">
            üîê ƒêƒÉng nh·∫≠p ƒë·ªÉ ƒë·∫∑t ph√≤ng
        </a>
        {% endif %}
        {% endif %}
    </div>
</div>

{% endblock %}
